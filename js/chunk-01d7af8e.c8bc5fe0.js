(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-01d7af8e"],{"02de":function(t,e,n){"use strict";function i(t){var e=window.getComputedStyle(t),n="none"===e.display,i=null===t.offsetParent&&"fixed"!==e.position;return n||i}n.d(e,"a",(function(){return i}))},"0baf":function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"header"},[n("span",{staticClass:"iconfont iconarrowLeft",on:{click:t.skip}}),n("h2",[t._t("default")],2)])},r=[],c={methods:{skip:function(){this.$emit("back")}}},o=c,a=(n("f876"),n("2877")),s=Object(a["a"])(o,i,r,!1,null,"7bf5e582",null);e["a"]=s.exports},"1f97":function(t,e,n){},"4bf9":function(t,e,n){},"8bee":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.datalist?n("div",[n("oHeader",{on:{back:t.back}},[t._v("当前城市")]),n("form",{attrs:{action:"/"}},[n("van-search",{attrs:{"show-action":"",placeholder:"请输入搜索关键词"},on:{search:t.onSearch,cancel:t.onCancel},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})],1),t.value?t._e():n("div",{staticClass:"cityList"},[n("van-index-bar",{attrs:{"index-list":t.indexList}},t._l(t.datalist,(function(e,i){return n("div",{key:i},[n("van-index-anchor",{attrs:{index:e.index}}),t._l(e.list,(function(e,i){return n("van-cell",{key:i,attrs:{title:e.name},on:{click:function(n){return t.moveCity(e.name,e.cityId)}}})}))],2)})),0)],1),t.value?n("div",{staticClass:"searchCity"},[n("van-index-bar",t._l(t.SearchCity,(function(t,e){return n("div",{key:e},[n("van-cell",{attrs:{title:t.name}})],1)})),0)],1):t._e()],1):t._e()},r=[],c=(n("4de4"),n("caad"),n("b0c0"),n("2532"),n("e7e5"),n("d399")),o=n("5530"),a=(n("68ef"),n("1f97"),n("d282")),s=n("9884"),l=n("b1d2"),u=Object(a["a"])("index-anchor"),h=u[0],d=u[1],f=h({mixins:[Object(s["a"])("vanIndexBar",{indexKey:"childrenIndex"})],props:{index:[Number,String]},data:function(){return{top:0,left:null,width:null,active:!1}},computed:{sticky:function(){return this.active&&this.parent.sticky},anchorStyle:function(){if(this.sticky)return{zIndex:""+this.parent.zIndex,left:this.left?this.left+"px":null,width:this.width?this.width+"px":null,transform:"translate3d(0, "+this.top+"px, 0)",color:this.parent.highlightColor}}},mounted:function(){this.height=this.$el.offsetHeight},methods:{scrollIntoView:function(){this.$el.scrollIntoView()}},render:function(){var t,e=arguments[0],n=this.sticky;return e("div",{style:{height:n?this.height+"px":null}},[e("div",{style:this.anchorStyle,class:[d({sticky:n}),(t={},t[l["a"]]=n,t)]},[this.slots("default")||this.index])])}}),v=(n("bd4f"),n("a142")),p=n("02de"),b=n("1325"),x=n("a8c1"),m=n("3875"),y=n("5fbe");function g(){for(var t=[],e="A".charCodeAt(0),n=0;n<26;n++)t.push(String.fromCharCode(e+n));return t}var k=Object(a["a"])("index-bar"),O=k[0],C=k[1],j=O({mixins:[m["a"],Object(s["b"])("vanIndexBar"),Object(y["a"])((function(t){this.scroller||(this.scroller=Object(x["d"])(this.$el)),t(this.scroller,"scroll",this.onScroll)}))],props:{zIndex:[Number,String],highlightColor:String,sticky:{type:Boolean,default:!0},stickyOffsetTop:{type:Number,default:0},indexList:{type:Array,default:g}},data:function(){return{activeAnchorIndex:null}},computed:{sidebarStyle:function(){if(Object(v["b"])(this.zIndex))return{zIndex:this.zIndex+1}},highlightStyle:function(){var t=this.highlightColor;if(t)return{color:t}}},watch:{indexList:function(){this.$nextTick(this.onScroll)}},methods:{onScroll:function(){var t=this;if(!Object(p["a"])(this.$el)){var e=Object(x["c"])(this.scroller),n=this.getScrollerRect(),i=this.children.map((function(e){return{height:e.height,top:t.getElementTop(e.$el,n)}})),r=this.getActiveAnchorIndex(e,i);this.activeAnchorIndex=this.indexList[r],this.sticky&&this.children.forEach((function(c,o){if(o===r||o===r-1){var a=c.$el.getBoundingClientRect();c.left=a.left,c.width=a.width}else c.left=null,c.width=null;if(o===r)c.active=!0,c.top=Math.max(t.stickyOffsetTop,i[o].top-e)+n.top;else if(o===r-1){var s=i[r].top-e;c.active=s>0,c.top=s+n.top-c.height}else c.active=!1}))}},getScrollerRect:function(){return this.scroller.getBoundingClientRect?this.scroller.getBoundingClientRect():{top:0,left:0}},getElementTop:function(t,e){var n=this.scroller;if(n===window||n===document.body)return Object(x["a"])(t);var i=t.getBoundingClientRect();return i.top-e.top+Object(x["c"])(n)},getActiveAnchorIndex:function(t,e){for(var n=this.children.length-1;n>=0;n--){var i=n>0?e[n-1].height:0,r=this.sticky?i+this.stickyOffsetTop:0;if(t+r>=e[n].top)return n}return-1},onClick:function(t){this.scrollToElement(t.target)},onTouchMove:function(t){if(this.touchMove(t),"vertical"===this.direction){Object(b["c"])(t);var e=t.touches[0],n=e.clientX,i=e.clientY,r=document.elementFromPoint(n,i);if(r){var c=r.dataset.index;this.touchActiveIndex!==c&&(this.touchActiveIndex=c,this.scrollToElement(r))}}},scrollToElement:function(t){var e=t.dataset.index;if(e){var n=this.children.filter((function(t){return String(t.index)===e}));n[0]&&(n[0].scrollIntoView(),this.sticky&&this.stickyOffsetTop&&Object(x["e"])(Object(x["b"])()-this.stickyOffsetTop),this.$emit("select",n[0].index))}},onTouchEnd:function(){this.active=null}},render:function(){var t=this,e=arguments[0],n=this.indexList.map((function(n){var i=n===t.activeAnchorIndex;return e("span",{class:C("index",{active:i}),style:i?t.highlightStyle:null,attrs:{"data-index":n}},[n])}));return e("div",{class:C()},[e("div",{class:C("sidebar"),style:this.sidebarStyle,on:{click:this.onClick,touchstart:this.touchStart,touchmove:this.onTouchMove,touchend:this.onTouchEnd,touchcancel:this.onTouchEnd}},[n]),this.slots("default")])}}),I=(n("5852"),n("d961")),w=(n("c194"),n("7744")),S=n("751a"),$=n("0baf"),T=n("2f62"),A=n("2b0e");A["a"].use(w["a"]),A["a"].use(I["a"]),A["a"].use(j),A["a"].use(f);var E={created:function(){var t=this;Object(S["a"])("/gateway?k=3021205",{headers:{"X-Host":"mall.film-ticket.city.list"}}).then((function(e){t.searchArr=e.data.data.cities,console.log(e.data.data.cities),t.filterName(e.data.data.cities)}))},data:function(){return{value:"",datalist:null,indexList:[],searchArr:null}},computed:Object(o["a"])(Object(o["a"])(Object(o["a"])({},Object(T["e"])("city",["cityName"])),Object(T["e"])("cinema",["cityId"])),{},{SearchCity:function(){var t=this;return this.searchArr.filter((function(e){return e.pinyin.substr(0,1).toUpperCase().includes(t.value.toUpperCase())||e.name.includes(t.value)}))}}),components:{oHeader:$["a"]},methods:Object(o["a"])(Object(o["a"])({moveCity:function(t,e){this.changeCity(t),this.changeCityId(e),this.$router.push("/cinema")}},Object(T["d"])("city",["changeCityId","changeCity"])),{},{filterName:function(t){for(var e=[],n=[],i=65;i<91;i++)e.push(String.fromCharCode(i));for(var r=0;r<e.length;r++){var c=t.filter((function(t){return t.pinyin.substr(0,1).toUpperCase()===e[r]}));c.length>0&&(n.push({index:e[r],list:c}),this.indexList.push(e[r]))}this.datalist=n},back:function(){this.$router.back()},onSearch:function(t){Object(c["a"])(t)},onCancel:function(){this.value=""}})},_=E,R=(n("f954"),n("2877")),L=Object(R["a"])(_,i,r,!1,null,"3ee35ded",null);e["default"]=L.exports},9884:function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return a}));var i=n("2b0e");function r(t){var e=[];function n(t){t.forEach((function(t){e.push(t),t.componentInstance&&n(t.componentInstance.$children.map((function(t){return t.$vnode}))),t.children&&n(t.children)}))}return n(t),e}function c(t,e){var n=e.$vnode.componentOptions;if(n&&n.children){var i=r(n.children);t.sort((function(t,e){return i.indexOf(t.$vnode)-i.indexOf(e.$vnode)}))}}function o(t,e){var n,r;void 0===e&&(e={});var o=e.indexKey||"index";return i["a"].extend({inject:(n={},n[t]={default:null},n),computed:(r={parent:function(){return this.disableBindRelation?null:this[t]}},r[o]=function(){return this.bindRelation(),this.parent?this.parent.children.indexOf(this):null},r),mounted:function(){this.bindRelation()},beforeDestroy:function(){var t=this;this.parent&&(this.parent.children=this.parent.children.filter((function(e){return e!==t})))},methods:{bindRelation:function(){if(this.parent&&-1===this.parent.children.indexOf(this)){var t=[].concat(this.parent.children,[this]);c(t,this.parent),this.parent.children=t}}}})}function a(t){return{provide:function(){var e;return e={},e[t]=this,e},data:function(){return{children:[]}}}}},b1d2:function(t,e,n){"use strict";n.d(e,"d",(function(){return i})),n.d(e,"a",(function(){return c})),n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return a}));var i="#fff",r="van-hairline",c=r+"--bottom",o=r+"--surround",a=r+"--top-bottom"},bd4f:function(t,e,n){},c194:function(t,e,n){"use strict";n("68ef"),n("9d70"),n("3743"),n("1a04")},f47b:function(t,e,n){},f876:function(t,e,n){"use strict";var i=n("4bf9"),r=n.n(i);r.a},f954:function(t,e,n){"use strict";var i=n("f47b"),r=n.n(i);r.a}}]);
//# sourceMappingURL=chunk-01d7af8e.c8bc5fe0.js.map